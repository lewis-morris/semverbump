# semverbump

Static public-API diff and heuristics to suggest semantic version bumps.

## Configuration

Create a `semverbump.toml` file to customize behavior. Optional analyzers are
controlled in the `[analyzers]` section:

```toml
[analyzers]
cli = true      # enable CLI analysis
web_routes = false  # disable route analysis
```

Only analyzers explicitly set to `true` run.

### Analyzer reference

#### CLI (`cli`)

Tracks command-line interfaces defined with ``argparse`` or ``click``.

Severity rules:

- Removed command → **major**
- Added command → **minor**
- Removed required option/argument → **major**
- Removed optional option/argument → **minor**
- Added required option/argument → **major**
- Added optional option/argument → **minor**
- Option/argument became optional → **minor**
- Option/argument became required → **major**

Configuration:

```toml
[analyzers]
cli = true  # enable
# cli = false  # disable
```

Dependencies: analysis of Click applications requires the `click` package.

#### Web routes (`web_routes`)

Detects HTTP route changes in Flask or FastAPI applications.

Severity rules:

- Removed route → **major**
- Added route → **minor**
- Removed required parameter → **major**
- Removed optional parameter → **minor**
- Added required parameter → **major**
- Added optional parameter → **minor**
- Parameter became optional → **minor**
- Parameter became required → **major**

Configuration:

```toml
[analyzers]
web_routes = true  # enable
# web_routes = false  # disable
```

Dependencies: requires `flask` or `fastapi`.

#### Migrations

Analyzes Alembic migration scripts for schema changes.

Severity rules:

- `op.drop_column` → **major**
- `op.add_column` (non-nullable without default) → **major**
- `op.add_column` (otherwise) → **minor**
- `op.create_index` → **minor**

Configuration:

```toml
[migrations]
paths = ["migrations"]  # directories containing Alembic scripts
# paths = []             # disable migration analysis
```

Dependencies: expects migrations generated by `alembic`.

### Third-party dependencies

Ensure project dependencies for analyzers are installed:

- `click` for the CLI analyzer
- `flask` or `fastapi` for the web route analyzer
- `alembic` for the migrations analyzer
- Other plugins may require additional libraries such as `jsonschema`

## Roadmap

Planned enhancements and ideas for future development include:

- **Additional analyzers**: support for GraphQL schemas, gRPC services,
  and OpenAPI specifications to broaden coverage of public interfaces.
- **Plugin architecture**: allow projects to register custom analyzers and
  severity rules through a stable extension API.
- **Configurable severity**: enable user-defined mapping of changes to
  semantic version levels.
- **Rich reports**: emit machine-readable JSON or human-friendly HTML
  summaries of detected changes.
- **CI integration**: provide streamlined helpers for GitHub Actions and
  other CI systems.
- **Performance improvements**: caching mechanisms and smarter diffing to
  handle large repositories efficiently.
